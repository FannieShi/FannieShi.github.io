<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>仿微博提示可输入剩余字符</title>
<link rel="stylesheet" type="text/css" href="../extend/css/bootstrap.min.css"/>
<link rel="stylesheet" type="text/css" href="../extend/css/bootstrap-theme.min.css"/>
<link rel="stylesheet" type="text/css" href="../extend/css/commen.css"/>
</head>
<body>
	<input type="text" data-length="10" data-model="Ch" id="input" />


<script type="text/javascript">
	window.onload = function(){
		var _input = document.getElementById('input');
		
		_input.onfocus = function(){
			countNum(this);
		}
		_input.onblur = function(){
			countNum(this);
		}
		_input.onkeyup = function(){
			countNum(this);
		}
		
		var	countNum = function(_this){
				var _val = _this.value,
					_vLen = _val.length,
					dataLength = _this.getAttribute('data-length'),
					dataModel = _this.getAttribute('data-model'),
					subLen;
				
				if(_vLen>dataLength){
					_this.value = _val.substr(0,dataLength);
				}
				if(dataModel == "Ch"){
					_vLen = strLen(_val,dataModel);
					var vv = _val.match(/[\u4e00-\u9fa5]/g);
					subLen = dataLength - (vv ? vv.length: 0);
				}
				if(_vLen>dataLength){
					_this.value = _val.substr(0,subLen);
				}
			}
	}
</script>
</body>
</html>
